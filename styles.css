/* ================================
   Modern Minimal Dashboard Style
   ================================ */

@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');

/* ---------- Color System ---------- */
:root {
  --bg:#eaf7f0;
  --bg-accent:#f3f9f5;

  --card:#ffffff;
  --card-soft:#fafafa;
  --border:#e5e7eb;
  --shadow:0 6px 18px rgba(0,0,0,.07);
  --shadow-strong:0 12px 32px rgba(0,0,0,.10);

  --text:#1f2937;
  --text-soft:#667085;
  --muted:#9ca3af;
  --head:#3e556f;

  --primary:#22c55e;
  --primary-600:#16a34a;
  --primary-100:#dcfce7;

  --mini-bg:#f8fafc;
  --mini-border:#e2e8f0;

  --header-bg:#ffffff;
  --header-sticky-bg:#1b7d4e;   /* أخضر أفتح للهيدر */

  --warn:#facc15;
  --danger:#ef4444;

  --tint-data-bg:#eff6ff;    --tint-data-border:#bfdbfe;
  --tint-steps-bg:#f0fdf4;   --tint-steps-border:#bbf7d0;
  --tint-req-bg:#fffbeb;     --tint-req-border:#fde68a;

  /* Mini Summary */
  --summary-bg:#ecfdf5;
  --summary-border:#a7f3d0;
  --steps-head:var(--primary-600);
  --req-head:#b45309;

  --r-xl:20px; --r-2xl:26px; --r-3xl:34px; --p-card:20px;
  --ring:0 0 0 3px rgba(34,197,94,.18);

  --font:"Cairo","Noto Sans Arabic","Inter","Segoe UI",Roboto,Arial,sans-serif;

  /* الخلاصة تلزق أسفل الهيدر */
  --mini-stick-top: 92px;
}

/* ---------- Themes (swatches) ---------- */
body[data-brand="mid"]{
  --primary:#10b981; --primary-600:#059669; --primary-100:#d1fae5;
  --summary-bg:#ecfdf5; --summary-border:#a7f3d0;
}
body[data-brand="green"]{
  --primary:#16a34a; --primary-600:#15803d; --primary-100:#dcfce7;
  --summary-bg:#ecfdf5; --summary-border:#bbf7d0;
}
body[data-brand="blue"]{
  --primary:#2563eb; --primary-600:#1d4ed8; --primary-100:#dbeafe;
  --summary-bg:#eff6ff; --summary-border:#bfdbfe;
}
body[data-brand="violet"]{
  --primary:#7c3aed; --primary-600:#6d28d9; --primary-100:#ede9fe;
  --summary-bg:#f5f3ff; --summary-border:#ddd6fe;
}
body[data-brand="pink"]{
  --primary:#db2777; --primary-600:#be185d; --primary-100:#fce7f3;
  --summary-bg:#fdf2f8; --summary-border:#fbcfe8;
}
body[data-brand="orange"]{
  --primary:#ea580c; --primary-600:#c2410c; --primary-100:#ffedd5;
  --summary-bg:#fff7ed; --summary-border:#fed7aa;
}

/* ---------- Global ---------- */
*{ box-sizing:border-box; margin:0; padding:0; }
body{
  font-family:var(--font);
  background:linear-gradient(to bottom, var(--bg), #ffffff);
  color:var(--text);
  line-height:1.55;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  padding:20px;
}
.rtl{ direction:rtl; }

/* ---------- Header ---------- */
.header{
  max-width:1120px; margin-inline:auto;
  display:flex; align-items:center; justify-content:space-between; gap:16px;
  padding:18px 24px;
  background:var(--header-bg);
  border:1px solid var(--border);
  border-radius:var(--r-2xl);
  box-shadow:var(--shadow);
  margin-bottom:24px;
}
.header.sticky{
  position:sticky; top:0; z-index:100;
  background:var(--header-sticky-bg);
  border-color:transparent;
  box-shadow:0 10px 22px rgba(0,0,0,.12);
}
.header.sticky .prepared-left,
.header.sticky .prepared,
.header.sticky .prepared strong,
.header.sticky .prepared.store,
.header.sticky .prepared.product{
  color:#fff !important;
}
.header-left .prepared-left{ color:#111827; font-weight:700; font-size:.92rem; }
.header-center{ text-align:center; }
.prepared{ font-weight:800; color:var(--text); font-size:1.05rem; letter-spacing:.1px; }
.prepared.store{ color:#e8f3ea; font-size:1.15rem; }
.prepared.product{ color:#cfe5d6; font-weight:600; }

/* يمين: السواتشات */
.header-tools{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
.theme-switcher{ display:flex; gap:8px; align-items:center; }
.swatch{
  width:22px; height:22px; border-radius:999px; border:2px solid #fff;
  box-shadow:var(--shadow); cursor:pointer; outline:none;
}
.swatch:focus{ box-shadow:var(--ring); }
.swatch.green{ background:#16a34a }
.swatch.mid{   background:#10b981 }
.swatch.blue{  background:#2563eb }
.swatch.violet{background:#7c3aed }
.swatch.pink{  background:#db2777 }
.swatch.orange{background:#ea580c }

/* ---------- Grid ---------- */
.grid{
  max-width:1120px; margin-inline:auto;
  display:grid;
  grid-template-columns: 1.6fr 1fr;  /* يمين عريض / يسار أضيق */
  grid-template-areas: "right left";
  gap:24px;
}
.col-left{  grid-area:left;  }
.col-right{ grid-area:right; }
@media (max-width:1100px){
  .grid{ grid-template-columns:1fr; grid-template-areas:"right" "left"; }
}
body[data-layout="normal"] .grid{
  grid-template-columns:1fr 1.6fr;
  grid-template-areas:"left right";
}

/* ---------- Cards ---------- */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--r-2xl);
  box-shadow:var(--shadow);
  transition:.2s box-shadow, .2s transform;
}
.card:hover{ box-shadow:var(--shadow-strong); transform:translateY(-1px); }
.p-card{ padding:var(--p-card); }
.card-title{
  display:flex; align-items:center; gap:12px;
  font-weight:800; color:#17372a;
  margin:0 0 14px 0; font-size:1.02rem; letter-spacing:.1px;
}
.card-title::before{
  content:attr(data-ico);
  display:inline-flex; align-items:center; justify-content:center;
  width:32px; height:32px; border-radius:12px;
  background:var(--primary-100); color:var(--primary-600); font-size:16px;
}

/* خط أخضر */
.accent-line{
  height:4px; border-radius:999px; background:var(--primary-600);
  opacity:.85; margin:4px 0 12px;
}

/* Badge */
.badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 10px; border-radius:999px; font-size:.78rem; font-weight:700; border:1px solid transparent;
}
.badge-req{ background:var(--tint-req-bg); color:#92400e; border-color:var(--tint-req-border); }

/* ---------- Inputs ---------- */
.form-grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; }
@media (max-width:900px){ .form-grid{ grid-template-columns:1fr; } }
.form-field{ display:flex; flex-direction:column; gap:6px; }
.label{ font-size:.92rem; color:#17372a; font-weight:800; letter-spacing:.15px; }

input[type="text"], textarea{
  width:100%; padding:12px 14px;
  border-radius:12px; border:1px solid var(--border);
  background:#fff; color:var(--text);
  transition:.2s border-color,.2s box-shadow;
}
input::placeholder, textarea::placeholder{ color:var(--muted); }
input:focus, textarea:focus{ border-color:var(--primary); box-shadow:var(--ring); }

/* ---------- Q blocks ---------- */
.q-block{
  background:var(--card-soft);
  border:1px dashed var(--border);
  border-radius:14px;
  padding:14px; margin:12px 0;
}
.q-title{ font-weight:700; color:#17372a; margin-bottom:10px; font-size:.98rem; }
.inline-options{ display:flex; flex-wrap:wrap; gap:10px; }
.inline-options label{
  position:relative;
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 16px;
  border:1px solid var(--border); border-radius:12px;
  background:#fff; cursor:pointer;
  font-size:.95rem; font-weight:700; color:var(--text);
  transition:.2s, transform .12s ease;
}
.inline-options label:hover{ transform:translateY(-1px); }
.inline-options input[type="radio"]{
  position:absolute; opacity:0; inset:0; width:100%; height:100%; cursor:pointer;
}
.inline-options label:has(input[type="radio"]:checked){
  background:#ecfdf5; color:#065f46; border-color:#bbf7d0; box-shadow:var(--ring);
}
.inline-options label:has(input[type="radio"]:checked)::after{
  content:"✓"; font-weight:800; margin-inline-start:6px;
}

/* ---------- Case grid ---------- */
.case-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); gap:14px; }
.case{
  background:#fff; border:1px solid var(--border);
  border-radius:16px; padding:14px; text-align:center;
  font-weight:800; color:var(--text); font-size:.85rem;
  cursor:pointer; transition:.2s, transform .12s ease;
}
.case:hover{ transform:translateY(-2px); box-shadow:var(--shadow); }
.case.active{ border-color:var(--primary); background:#f0fdf4; color:#065f46; }

/* ---------- Summary (المطلوب) ---------- */
#summary{
  min-height:100px;
  background:var(--tint-req-bg);
  border:1px solid var(--tint-req-border);
  border-radius:var(--r-xl);
  padding:14px;
}
#summary .result{
  background:#fff;
  border:1px dashed var(--tint-req-border);
  border-radius:10px;
  padding:10px; margin:6px 0; font-size:.92rem; color:var(--text);
}

/* ---------- Mini Summary (أسفل نوع الشكوى + Sticky) ---------- */
#miniSummary{
  font-size:.92rem; color:#111827;
  background:var(--summary-bg);
  border:1px solid var(--summary-border);
  border-radius:var(--r-2xl);
  padding:14px 16px;
}
#miniSummary li::marker{ color:var(--primary-600); }
#miniSummary .mini-title{ font-weight:800; color:var(--primary-600); margin-bottom:8px; }
#miniSummary .mini-section{ border-radius:12px; padding:10px 12px; margin:8px 0; border:1px solid transparent; background:transparent; }
#miniSummary .mini-section.is-data  strong{ color:#17372a; }
#miniSummary .mini-section.is-steps strong{ color:var(--steps-head); }
#miniSummary .mini-section.is-req   strong{ color:var(--req-head); }
#miniSummary ul{ margin:6px 0 0; padding-inline-start:18px; }

/* Sticky behaviour */
.mini-sticky{
  position:sticky;
  top: var(--mini-stick-top);
  z-index: 30;
}
/* مسافة صغيرة تحت نوع الشكوى */
.mini-under{ margin-top: 14px; }

/* ---------- Segmented + أزرار الخلاصة ---------- */
.segmented{ display:inline-flex; flex-wrap:wrap; gap:8px; }
.seg{ display:inline-flex; align-items:center; padding:8px 14px; border:1px solid var(--border); border-radius:999px; font-size:.92rem; font-weight:800; color:var(--text-soft); cursor:pointer; background:#fff; transition:.2s; }
.seg:hover{ background:var(--primary-100); color:var(--primary-600); }
.seg input{ display:none; }
.seg input:checked + span{ background:var(--primary); color:#fff; border-radius:999px; padding:8px 14px; }

/* تخصيص زرّين الخلاصة */
#copyMiniBtn{
  background:var(--primary); color:#fff; border:none; border-radius:12px;
  padding:10px 14px; box-shadow:var(--shadow); font-weight:800;
}
#copyMiniBtn:hover{ background:var(--primary-600); }
#endBtn{
  background:var(--danger); color:#fff; border:none; border-radius:12px;
  padding:10px 14px; box-shadow:var(--shadow); font-weight:800;
}
#endBtn:hover{ filter:brightness(.95); }

/* ---------- Thin progress ---------- */
.thin-progress{
  margin:0 0 10px 0; height:8px; background:#e5e7eb;
  border-radius:999px; overflow:hidden;
}
.thin-progress .bar{
  height:100%; background:var(--primary); border-radius:999px;
  width:0%; transition:width .2s ease;
}

/* ---------- Utilities ---------- */
.hint{ color:var(--text-soft); font-size:.85rem; }
.row{ display:flex; gap:14px; align-items:flex-start; }
.mt8{ margin-top:8px; } .mt12{ margin-top:12px; } .mt16{ margin-top:16px; }
#qaCard{ padding:18px; } #questions{ margin-top:8px; } .q-after-grid{ margin-top:10px; }

/* ---------- Footer ---------- */
.footer-prepared{ max-width:1120px; margin:30px auto 0; text-align:center; color:var(--muted); font-size:.85rem; font-weight:600; }

/* تصغير الالتصاق على الموبايل */
@media (max-width:1100px){
  :root{ --mini-stick-top: 78px; }
}